{{- /* tocパラメータを確認 */ -}}
{{- if (.Param "toc" | default true) -}}
    {{- /* ここはさっきと同じ */ -}}
    {{- if (.Param "tocMove" | default true) -}}
        {{- $header := (findRE "<h2.*?>(?:.|\n)*?</h2>" .Content) -}}
        {{- $firstH := index $header 0 -}}

        {{- if ne $firstH nil -}}
            {{- $newH := printf `%s%s` .TableOfContents $firstH -}}
            {{- replace .Content $firstH $newH | safeHTML -}}
        {{- else -}}
            {{- .Content -}}
        {{- end -}}
    {{- else -}}
        {{- .TableOfContents -}}
        {{- .Content -}}
    {{- end -}}
{{- else -}}
    {{- /* ToC使わないとき */ -}}
    {{- .Content -}}
{{- end -}}