{{ define "main" }}

<div class="columns">
    <div class="column is-9">
        <div class="tile is-child box">
            <div class="content">
                {{- /* tocパラメータを確認 */ -}}
                {{- if (.Param "toc" | default true) -}}
                    {{- /* ここはさっきと同じ */ -}}
                    {{- if (.Param "tocMove" | default true) -}}
                        {{- $header := (findRE "<h2.*?>(?:.|\n)*?</h2>" .Content) -}}
                        {{- $firstH := index $header 0 -}}
                
                        {{- if ne $firstH nil -}}
                            {{- $newH := printf `%s%s` .TableOfContents $firstH -}}
                            {{- replace .Content $firstH $newH | safeHTML -}}
                        {{- else -}}
                            {{- .Content -}}
                        {{- end -}}
                    {{- else -}}
                        {{- .TableOfContents -}}
                        {{- .Content -}}
                    {{- end -}}
                {{- else -}}
                    {{- /* ToC使わないとき */ -}}
                    {{- .Content -}}
                {{- end -}}
              {{ template "_internal/disqus.html" . }}
            </div>
        </div>
    </div>
    <div class="column is-3">
        {{ partial "widget-tags.html" . }}<br>
        {{ partial "widget-recent.html" . }}<br>
        {{ partial "widget-related.html" . }}<br>
        {{ partial "widget-archives.html" . }}
    </div>
</div>

{{ end }}
